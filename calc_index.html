<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Compact Conversion Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      background-color: #f8f8f8;
      padding: 40px;
      max-width: 1000px;
      margin: auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    #search {
      display: block;
      width: 60%;
      margin: 0 auto 30px auto;
      padding: 10px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    #conversions {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: space-between;
    }

    .converter {
      position: relative;
      background: linear-gradient(to bottom, #ffffff, #cce0ff);
      padding: 20px;
      border-radius: 12px;
      border: 1px solid #c0c0c0;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      width: 48%;
      box-sizing: border-box;
    }

    .converter h2 {
      text-align: center;
      margin-bottom: 15px;
      font-size: 16px;
    }

    .box {
      margin-bottom: 10px;
      text-align: center;
    }

    .box label {
      display: block;
      font-weight: bold;
      margin-bottom: 6px;
      font-size: 14px;
    }

    .box input {
      width: 80%;
      padding: 8px;
      font-size: 14px;
      border: 1px solid #888;
      border-radius: 4px;
      box-sizing: border-box;
    }

    .info {
      position: absolute;
      top: 10px;
      right: 12px;
      cursor: pointer;
      font-weight: bold;
      font-size: 16px;
      color: #00467F;
    }

    .info:hover::after {
      content: attr(data-formula);
      position: absolute;
      top: 20px;
      right: 0;
      background: #00467F;
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 13px;
      white-space: nowrap;
      z-index: 10;
      box-shadow: 0 3px 6px rgba(0,0,0,0.2);
    }

    @media (max-width: 768px) {
      .converter {
        width: 100%;
      }

      #search {
        width: 90%;
      }
    }
  </style>
</head>
<body>
  <h1>Compact Conversion Calculator</h1>
  <input type="text" id="search" placeholder="Search for a conversion...">

  <div id="conversions"></div>

  <script>
    const conversions = [
      { label: "Bar ⇄ PSI", from: "bar", to: "psi", factor: 14.5038, formula: "x * 14.5038 ⇄ x / 14.5038" },
      { label: "In. of HG ⇄ PSI", from: "inhg", to: "psi", factor: 0.491154, formula: "x * 0.491154 ⇄ x / 0.491154" },
      { label: "In. of H2O ⇄ PSI", from: "inh2o", to: "psi", factor: 0.0361263, formula: "x * 0.0361263 ⇄ x / 0.0361263" },
      { label: "CC ⇄ in³", from: "cc", to: "in3", factor: 0.0610237, formula: "x * 0.0610237 ⇄ x / 0.0610237" },
      { label: "°C ⇄ °F", from: "c", to: "f", custom: {
        forward: v => v * 9 / 5 + 32,
        reverse: v => (v - 32) * 5 / 9
      }, formula: "(x × 9/5) + 32 ⇄ (x − 32) × 5/9" },
      { label: "KG ⇄ LBS", from: "kg", to: "lbs", factor: 2.20462, formula: "x * 2.20462 ⇄ x / 2.20462" },
      { label: "KW ⇄ HP", from: "kw", to: "hp", factor: 1.34102, formula: "x * 1.34102 ⇄ x / 1.34102" },
      { label: "Liters ⇄ Gallons", from: "liters", to: "gallons", factor: 0.264172, formula: "x * 0.264172 ⇄ x / 0.264172" },
      { label: "MM ⇄ Inches", from: "mm", to: "inches", factor: 1 / 25.4, formula: "x / 25.4 ⇄ x * 25.4" },
      { label: "Nm ⇄ lb-ft", from: "nm", to: "lbft", factor: 0.737562, formula: "x * 0.737562 ⇄ x / 0.737562" }
    ];

    const container = document.getElementById("conversions");

    function renderConversions(filter = "") {
      container.innerHTML = "";
      conversions.forEach((conv, i) => {
        if (!conv.label.toLowerCase().includes(filter.toLowerCase())) return;

        const div = document.createElement("div");
        div.className = "converter";
        div.innerHTML = `
          <span class="info" data-formula="${conv.formula}">ℹ️</span>
          <h2>${conv.label}</h2>
          <div class="box">
            <label for="inputA_${i}">${conv.from.toUpperCase()}</label>
            <input type="number" id="inputA_${i}" step="any">
          </div>
          <div class="box">
            <label for="inputB_${i}">${conv.to.toUpperCase()}</label>
            <input type="number" id="inputB_${i}" step="any">
          </div>
        `;
        container.appendChild(div);

        const inputA = div.querySelector(`#inputA_${i}`);
        const inputB = div.querySelector(`#inputB_${i}`);

        let lock = false;

        inputA.addEventListener("input", () => {
          if (lock) return;
          const val = parseFloat(inputA.value);
          if (isNaN(val)) {
            inputB.value = "";
            return;
          }
          lock = true;
          inputB.value = conv.custom
            ? conv.custom.forward(val).toFixed(4)
            : (val * conv.factor).toFixed(4);
          lock = false;
        });

        inputB.addEventListener("input", () => {
          if (lock) return;
          const val = parseFloat(inputB.value);
          if (isNaN(val)) {
            inputA.value = "";
            return;
          }
          lock = true;
          inputA.value = conv.custom
            ? conv.custom.reverse(val).toFixed(4)
            : (val / conv.factor).toFixed(4);
          lock = false;
        });
      });
    }

    renderConversions();

    document.getElementById("search").addEventListener("input", (e) => {
      renderConversions(e.target.value);
    });
  </script>
</body>
</html>
